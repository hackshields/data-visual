(function(e,t){var a=[].slice,f={};e.amplify={publish:function(e){var t,r,s,n,u=a.call(arguments,1),o=0;if(!f[e])return!0;for(s=(t=f[e].slice()).length;o<s&&!1!==(n=(r=t[o]).callback.apply(r.context,u));o++);return!1!==n},subscribe:function(e,t,r,s){3===arguments.length&&"number"==typeof r&&(s=r,r=t,t=null),2===arguments.length&&(r=t,t=null),s=s||10;for(var n,u=0,o=e.split(/\s/),a=o.length;u<a;u++){e=o[u],n=!1,f[e]||(f[e]=[]);for(var i=f[e].length-1,c={callback:r,context:t,priority:s};0<=i;i--)if(f[e][i].priority<=s){f[e].splice(i+1,0,c),n=!0;break}n||f[e].unshift(c)}return r},unsubscribe:function(e,t){if(f[e])for(var r=f[e].length,s=0;s<r;s++)if(f[e][s].callback===t){f[e].splice(s,1);break}}}})(this),function(e,p){function t(c,f){d.addType(c,function(t,e,r){var s,n,u,o,a=e,i=(new Date).getTime();if(!t){a={},o=[],u=0;try{for(t=f.length;t=f.key(u++);)l.test(t)&&((n=JSON.parse(f.getItem(t))).expires&&n.expires<=i?o.push(t):a[t.replace(l,"")]=n.data);for(;t=o.pop();)f.removeItem(t)}catch(e){}return a}if(t="__amplify__"+t,e===p){if(!((n=(s=f.getItem(t))?JSON.parse(s):{expires:-1}).expires&&n.expires<=i))return n.data;f.removeItem(t)}else if(null===e)f.removeItem(t);else{n=JSON.stringify({data:e,expires:r.expires?i+r.expires:null});try{f.setItem(t,n)}catch(e){d[c]();try{f.setItem(t,n)}catch(e){throw d.error()}}}return a})}var d=e.store=function(e,t,r,s){s=d.type;return r&&r.type&&r.type in d.types&&(s=r.type),d.types[s](e,t,r||{})};d.types={},d.type=null,d.addType=function(s,e){d.type||(d.type=s),d.types[s]=e,d[s]=function(e,t,r){return(r=r||{}).type=s,d(e,t,r)}},d.error=function(){return"amplify.store quota exceeded"};var l=/^__amplify__/;for(var r in{localStorage:1,sessionStorage:1})try{window[r].getItem&&t(r,window[r])}catch(e){}if(window.globalStorage)try{t("globalStorage",window.globalStorage[window.location.hostname]),"sessionStorage"===d.type&&(d.type="globalStorage")}catch(e){}(function(){if(!d.types.localStorage){var f=document.createElement("div"),l="amplify";f.style.display="none",document.getElementsByTagName("head")[0].appendChild(f);try{f.addBehavior("#default#userdata"),f.load(l)}catch(e){return f.parentNode.removeChild(f)}d.addType("userData",function(t,e,r){f.load(l);var s,n,u,o,a,i=e,c=(new Date).getTime();if(!t){for(i={},a=[],o=0;s=f.XMLDocument.documentElement.attributes[o++];)(n=JSON.parse(s.value)).expires&&n.expires<=c?a.push(s.name):i[s.name]=n.data;for(;t=a.pop();)f.removeAttribute(t);return f.save(l),i}if(t=t.replace(/[^-._0-9A-Za-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u37f-\u1fff\u200c-\u200d\u203f\u2040\u2070-\u218f]/g,"-"),e===p){if(!((n=(s=f.getAttribute(t))?JSON.parse(s):{expires:-1}).expires&&n.expires<=c))return n.data;f.removeAttribute(t)}else null===e?f.removeAttribute(t):(u=f.getAttribute(t),n=JSON.stringify({data:e,expires:r.expires?c+r.expires:null}),f.setAttribute(t,n));try{f.save(l)}catch(e){null===u?f.removeAttribute(t):f.setAttribute(t,u),d.userData();try{f.setAttribute(t,n),f.save(l)}catch(e){throw null===u?f.removeAttribute(t):f.setAttribute(t,u),d.error()}}return i})}})(),function(){function s(e){return e===p?p:JSON.parse(JSON.stringify(e))}var n={},u={};d.addType("memory",function(e,t,r){return e?t===p?s(n[e]):(u[e]&&(clearTimeout(u[e]),delete u[e]),null===t?(delete n[e],null):(n[e]=t,r.expires&&(u[e]=setTimeout(function(){delete n[e],delete u[e]},r.expires)),t)):s(n)})}()}(this.amplify=this.amplify||{}),function(c,e){function f(r){var s=!1;return setTimeout(function(){s=!0},1),function(){var e=this,t=arguments;s?r.apply(e,t):setTimeout(function(){r.apply(e,t)},1)}}function l(){}c.request=function(e,t,r){var s,n=e||{};"string"==typeof n&&(s=t,"[object Function]"==={}.toString.call(s)&&(r=t,t={}),n={resourceId:e,data:t||{},success:r});var u={abort:l},o=c.request.resources[n.resourceId],a=n.success||l,i=n.error||l;if(n.success=f(function(e,t){t=t||"success",c.publish("request.success",n,e,t),c.publish("request.complete",n,e,t),a(e,t)}),n.error=f(function(e,t){t=t||"error",c.publish("request.error",n,e,t),c.publish("request.complete",n,e,t),i(e,t)}),!o){if(!n.resourceId)throw"amplify.request: no resourceId provided";throw"amplify.request: unknown resourceId: "+n.resourceId}if(c.publish("request.before",n))return c.request.resources[n.resourceId](n,u),u;n.error(null,"abort")},c.request.types={},c.request.resources={},c.request.define=function(e,t,r){if("string"==typeof t){if(!(t in c.request.types))throw"amplify.request.define: unknown type: "+t;r.resourceId=e,c.request.resources[e]=c.request.types[t](r)}else c.request.resources[e]=t}}(amplify),function(c,f,l){var p=["status","statusText","responseText","responseXML","readyState"],u=/\{([^\}]+)\}/g;c.request.types.ajax=function(i){return i=f.extend({type:"GET"},i),function(r,e){function s(e,t){f.each(p,function(e,t){try{a[t]=n[t]}catch(e){}}),/OK$/.test(a.statusText)&&(a.statusText="success"),e===l&&(e=null),o&&(t="abort"),/timeout|error|abort/.test(t)?a.error(e,t):a.success(e,t),s=f.noop}i.url;var n,t=e.abort,u=f.extend(!0,{},i,{data:r.data}),o=!1,a={readyState:0,setRequestHeader:function(e,t){return n.setRequestHeader(e,t)},getAllResponseHeaders:function(){return n.getAllResponseHeaders()},getResponseHeader:function(e){return n.getResponseHeader(e)},overrideMimeType:function(e){return n.overrideMideType(e)},abort:function(){o=!0;try{n.abort()}catch(e){}s(null,"abort")},success:function(e,t){r.success(e,t)},error:function(e,t){r.error(e,t)}};c.publish("request.ajax.preprocess",i,r,u,a),f.extend(u,{success:function(e,t){s(e,t)},error:function(e,t){s(null,t)},beforeSend:function(e,t){return n=e,u=t,(!i.beforeSend||i.beforeSend.call(this,a,u))&&c.publish("request.before.ajax",i,r,u,a)}}),f.ajax(u),e.abort=function(){a.abort(),t.call(this)}}},c.subscribe("request.ajax.preprocess",function(e,t,r){var s=[],n=r.data;"string"!=typeof n&&(n=f.extend(!0,{},e.data,n),r.url=r.url.replace(u,function(e,t){if(t in n)return s.push(t),n[t]}),f.each(s,function(e,t){delete n[t]}),r.data=n)}),c.subscribe("request.ajax.preprocess",function(e,t,r){var s=r.data,n=e.dataMap;n&&"string"!=typeof s&&(f.isFunction(n)?r.data=n(s):(f.each(e.dataMap,function(e,t){e in s&&(s[t]=s[e],delete s[e])}),r.data=s))});var a,i=c.request.cache={_key:function(e,t,r){function s(){return r.charCodeAt(u++)<<24|r.charCodeAt(u++)<<16|r.charCodeAt(u++)<<8|r.charCodeAt(u++)<<0}for(var n=(r=t+r).length,u=0,o=s();u<n;)o^=s();return"request-"+e+"-"+o},_default:(a={},function(e,t,r,s){var n=i._key(t.resourceId,r.url,r.data),u=e.cache;if(n in a)return s.success(a[n]),!1;var o=s.success;s.success=function(e){a[n]=e,"number"==typeof u&&setTimeout(function(){delete a[n]},u),o.apply(this,arguments)}})};c.store&&(f.each(c.store.types,function(a){i[a]=function(t,e,r,s){var n=i._key(e.resourceId,r.url,r.data),u=c.store[a](n);if(u)return r.success(u),!1;var o=s.success;s.success=function(e){c.store[a](n,e,{expires:t.cache.expires}),o.apply(this,arguments)}}}),i.persist=i[c.store.type]),c.subscribe("request.before.ajax",function(e){var t=e.cache;if(t)return t=t.type||t,i[t in i?t:"_default"].apply(this,arguments)}),c.request.decoders={jsend:function(e,t,r,s,n){"success"===e.status?s(e.data):"fail"===e.status?n(e.data,"fail"):"error"===e.status&&(delete e.status,n(e,"error"))}},c.subscribe("request.before.ajax",function(e,t,r,s){function n(e,t){a(e,t)}function u(e,t){o(e,t)}var o=s.success,a=s.error,i=f.isFunction(e.decoder)?e.decoder:e.decoder in c.request.decoders?c.request.decoders[e.decoder]:c.request.decoders._default;!i||(s.success=function(e,t){i(e,t,s,u,n)},s.error=function(e,t){i(e,t,s,u,n)})})}(amplify,jQuery);