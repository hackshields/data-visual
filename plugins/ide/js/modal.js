!function(o,d){var i=o.codiad;i.modal={load:function(o,t,a){a=a||{};var e=this._getBounds(o);d("#modal").css({top:e.top,left:e.left,"min-width":o+"px","margin-left":"-"+Math.ceil(o/2)+"px"}).draggable({handle:"#drag-handle"}),d("#modal-content").html('<div id="modal-loading"></div>'),this.load_process=d.get(t,a,function(o){d("#modal-content").html(o),d('input[autofocus="autofocus"]').focus()});var l={animationPerformed:!1};amplify.publish("modal.onLoad",l),l.animationPerformed||d("#modal, #modal-overlay").fadeIn(200),i.sidebars.modalLock=!0},hideOverlay:function(){d("#modal-overlay").hide()},unload:function(){this._setBounds(),d("#modal-content form").die("submit");var o={animationPerformed:!1};amplify.publish("modal.onUnload",o),o.animationPerformed||(d("#modal, #modal-overlay").fadeOut(200),d("#modal-content").html("")),i.sidebars.modalLock=!1,i.sidebars.leftLock||(d("#sb-left").animate({left:"-290px"},300,"easeOutQuart"),d("#editor-region").animate({"margin-left":"10px"},300,"easeOutQuart")),i.editor.focus()},_setBounds:function(o){if(void 0===o){if(!d("#modal").is(":visible"))return!1;(o={}).top=Math.floor(d("#modal").offset().top),o.left=Math.floor(d("#modal").offset().left)}localStorage.setItem("codiad.modal.top",o.top),localStorage.setItem("codiad.modal.left",o.left)},_getBounds:function(o){if(null!==localStorage.getItem("codiad.modal.top")&&null!==localStorage.getItem("codiad.modal.left")&&i.editor.settings.persistentModal){var t=parseInt(localStorage.getItem("codiad.modal.top"),10),a=parseInt(localStorage.getItem("codiad.modal.left"),10);return t+40>d(window).height()?t="15%":t+="px",a+o+40>d(window).width()?a="50%":(a+=Math.ceil(o/2),a+="px"),{top:t,left:a}}return{top:"15%",left:"50%"}}}}(this,jQuery);